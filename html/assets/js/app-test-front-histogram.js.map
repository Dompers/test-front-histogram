{"version":3,"names":[],"mappings":"","sources":["app-test-front-histogram.js"],"sourcesContent":["var env_data = {};(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nvar rangeStorage;\nvar numberRangeStorage;\nvar rangeTransfer;\nvar numberRangeTransfer;\nvar RANGES_INFO = [{\n  name: \"backblaze\",\n  min_check: 7,\n  max_check: \"\",\n  storage: {\n    types: [],\n    price: 0.005\n  },\n  transfer: {\n    price: 0.01\n  },\n  free_count: \"\",\n  color: \"red\"\n}, {\n  name: \"bunny\",\n  min_check: \"\",\n  max_check: 10,\n  storage: {\n    types: [{\n      name: \"HDD\",\n      price: 0.01\n    }, {\n      name: \"SDD\",\n      price: 0.02\n    }],\n    price: \"\"\n  },\n  transfer: {\n    price: 0.01\n  },\n  free_count: \"\",\n  color: \"orange\"\n}, {\n  name: \"scaleway\",\n  min_check: \"\",\n  max_check: \"\",\n  storage: {\n    types: [{\n      name: \"Multi\",\n      price: 0.06\n    }, {\n      name: \"Single\",\n      price: 0.03\n    }],\n    price: 0.005\n  },\n  transfer: {\n    price: 0.02\n  },\n  free_count: 75,\n  color: \"violet\"\n}, {\n  name: \"vultr\",\n  min_check: 5,\n  max_check: \"\",\n  storage: {\n    types: [],\n    price: 0.01\n  },\n  transfer: {\n    price: 0.01\n  },\n  free_count: \"\",\n  color: \"blue\"\n}];\nvar setHistItemWidth = function setHistItemWidth(item, price) {\n  item.find('.range').width(item.width() / 100 * price);\n};\nvar setHistMinItemColor = function setHistMinItemColor() {\n  var ranges = [];\n  var resultGrouped = [];\n  $(\".ranges-histogram-block\").find(\".ranges-histogram-item\").each(function (i, range) {\n    var rangeAttr = {};\n    rangeAttr['name'] = $(range).attr(\"id\");\n    rangeAttr['price'] = parseFloat($(range).find(\".price\").text());\n    ranges.push(rangeAttr);\n    $(range).find(\".range\").css(\"background\", \"#ccc\");\n  });\n  ranges.sort(function (a, b) {\n    return a.price.toFixed(2) - b.price.toFixed(2);\n  });\n  resultGrouped = ranges.reduce(function (x, y) {\n    (x[y.price] = x[y.price] || []).push(y);\n    return x;\n  }, {});\n  resultGrouped = resultGrouped[ranges[0].price];\n  resultGrouped.forEach(function (i, currentRange) {\n    var range = RANGES_INFO.filter(function (rangeItem) {\n      return rangeItem.name === resultGrouped[currentRange].name;\n    });\n    $(\"#\" + range[0].name).find('.range').css(\"background\", range[0].color);\n  });\n};\nvar setRangeParams = function setRangeParams(range) {\n  var rangeStorageVal = parseInt(rangeStorage.noUiSlider.get());\n  var rangeTransferVal = parseInt(rangeTransfer.noUiSlider.get());\n  var rangeMin = range.min_check;\n  var rangeMax = range.max_check;\n  var rangeFreeCount = $.isNumeric(range.free_count) ? range.free_count : 0;\n  var rangePrice = 0;\n  var storagePrice = 0;\n  var transferPrice = 0;\n  var rangeStoragePrice = 0;\n  var rangeTransferPrice = 0;\n  var rangeLogoBlock = $(\"div[data-range-name='\" + range.name + \"']\");\n  var rangeHistogramBlock = $(\"#\" + range.name);\n  var inputType = 0 !== rangeLogoBlock.find(\"input[type='radio'][name='range-\" + range.name + \"']:checked\").length ? rangeLogoBlock.find(\"input[type='radio'][name='range-\" + range.name + \"']:checked\").val() : \"\";\n  var storageType = 0 !== range.storage.types.length ? range.storage.types.filter(function (typeItem) {\n    return typeItem.name === inputType;\n  }) : [];\n  var storageTypePrice = 0 !== storageType.length ? storageType[0].price : 0;\n  storagePrice = range.storage.types.length === 0 ? range.storage.price : storageTypePrice;\n  transferPrice = range.transfer.price ? range.transfer.price : 0;\n  if (rangeFreeCount !== 0 && rangeStorageVal > rangeFreeCount) {\n    rangeStoragePrice = (rangeStorageVal - rangeFreeCount) * storagePrice;\n  } else if (rangeFreeCount !== 0 && rangeStorageVal < rangeFreeCount) {\n    rangeStoragePrice = 0;\n  } else {\n    rangeStoragePrice = rangeStorageVal * storagePrice;\n  }\n  if (rangeFreeCount !== 0 && rangeTransferVal > rangeFreeCount) {\n    rangeTransferPrice = (rangeTransferVal - rangeFreeCount) * transferPrice;\n  } else if (rangeFreeCount !== 0 && rangeTransferVal < rangeFreeCount) {\n    rangeTransferPrice = 0;\n  } else {\n    rangeTransferPrice = rangeTransferVal * transferPrice;\n  }\n  rangePrice = rangeTransferPrice + rangeStoragePrice;\n  if (!$.isNumeric(rangeMax) && $.isNumeric(rangeMin) && rangePrice < rangeMin) {\n    rangePrice = rangeMin;\n  } else if ($.isNumeric(rangeMin) && $.isNumeric(rangeMax) && rangePrice > rangeMax) {\n    rangePrice = rangeMax;\n  }\n  setHistItemWidth($(rangeHistogramBlock), rangePrice);\n  rangeHistogramBlock.find('.price').text((rangePrice % rangePrice.toFixed(0) === 0 ? rangePrice : rangePrice.toFixed(2)) + \"$\");\n};\nvar setRanges = function setRanges() {\n  RANGES_INFO.forEach(function (range) {\n    setRangeParams(range);\n  });\n  setHistMinItemColor();\n};\n$(document).ready(function () {\n  if (0 !== $('#range-storage').length) {\n    rangeStorage = document.getElementById('range-storage');\n    noUiSlider.create(rangeStorage, {\n      start: [100],\n      step: 1,\n      range: {\n        'min': [0],\n        'max': [1000]\n      },\n      pips: {\n        mode: 'count',\n        values: 2\n      }\n    });\n    rangeStorage.noUiSlider.on('change', function (values, handle) {\n      setRanges();\n      setHistMinItemColor();\n    });\n    if (0 !== $('#range-transfer-input')) {\n      numberRangeStorage = document.getElementById('range-storage-number');\n      rangeStorage.noUiSlider.on('update', function (values, handle) {\n        numberRangeStorage.innerHTML = parseInt(values[handle]);\n      });\n    }\n  }\n  if (0 !== $('#range-transfer').length) {\n    rangeTransfer = document.getElementById('range-transfer');\n    noUiSlider.create(rangeTransfer, {\n      start: [200],\n      step: 1,\n      range: {\n        'min': [0],\n        'max': [1000]\n      },\n      pips: {\n        mode: 'count',\n        values: 2\n      }\n    });\n    rangeTransfer.noUiSlider.on('change', function (values, handle) {\n      setRanges();\n      setHistMinItemColor();\n    });\n    if (0 !== $('#range-transfer-input')) {\n      numberRangeTransfer = document.getElementById('range-transfer-number');\n      rangeTransfer.noUiSlider.on('update', function (values, handle) {\n        numberRangeTransfer.innerHTML = parseInt(values[handle]);\n      });\n    }\n  }\n  $('input[type=\"radio\"]').on('change', function () {\n    var _this = this;\n    var range = RANGES_INFO.filter(function (rangeItem) {\n      return rangeItem.name === $(_this).closest('.ranges-logo').data('rangeName');\n    });\n    if (0 !== range.length) {\n      setRangeParams(range[0]);\n      setHistMinItemColor();\n    }\n  });\n  setRanges();\n});\n\n},{}]},{},[1]);\n"],"file":"app-test-front-histogram.js"}